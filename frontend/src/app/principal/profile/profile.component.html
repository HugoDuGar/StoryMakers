<section class="section about-section gray-bg" id="about">
    <div class="container">
        <div class="row align-items-center flex-row-reverse">
            <div class="col-lg-6">
                <div class="about-text go-to">
                    <h3 class="dark-color beautiful">{{ user.name }}</h3>
                    <h6 class="theme-color lead beautiful">{{ user.description }}</h6>
                    <div class="row about-list">
                        <div class="col-md-6">
                            <div class="media">
                                <label class="beautiful">Rol</label>
                                <p class="beautiful">{{ user.role }}</p>
                            </div>
                            <div class="media">
                                <label class="beautiful">Edad</label>
                                <p class="beautiful">{{ user.age }}</p>
                            </div>
                            <div class="media">
                                <label class="beautiful">Géneros principales</label>
                                <p class="beautiful">{{ user.genders }}</p>
                            </div>
                            <div class="media">
                                <label class="beautiful">Nacionalidad</label>
                                <p class="beautiful">{{ user.nationality }}</p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="media">
                                <label class="beautiful">E-mail</label>
                                <p class="beautiful">{{ user.email }}</p>
                            </div>
                            <div class="media">
                                <button class="btn btn-warning beautiful" routerLink="/edit-profile">Editar mi perfil</button>
                            </div>
                            <div class="media">
                                <button class="btn btn-primary beautiful" routerLink="/histories">Escribir una historia</button>
                            </div>
                            <div class="media">
                                <button class="btn btn-danger beautiful" (click)="deleteSession()" routerLink="/login">Cerrar sesión</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <br>
                <div class="about-avatar">
                    <img [src]="getImageProfile(user.role)" alt="...">
                </div>
            </div>
        </div>
        <br>
        <hr>
        <div class="counter">
            <div class="row">
                <div class="col-6 col-lg-3">
                    <div class="count-data text-center">
                        <h6 class="count h2 beautiful" data-to="500" data-speed="500">{{ histories.length }}</h6>
                        <p class="m-0px font-w-600 beautiful">Historias creadas</p>
                    </div>
                </div>
                <div class="col-6 col-lg-3">
                    <div class="count-data text-center">
                        <h6 class="count h2 beautiful" data-to="150" data-speed="150">{{ finishedHistories.length }}</h6>
                        <p class="m-0px font-w-600 beautiful">Historias terminadas</p>
                    </div>
                </div>
                <div class="col-6 col-lg-3">
                    <div class="count-data text-center">
                        <h6 class="count h2 beautiful" data-to="850" data-speed="850">{{ savedHistories.length }}</h6>
                        <p class="m-0px font-w-600 beautiful">Historias guardadas</p>
                    </div>
                </div>
                <div class="col-6 col-lg-3">
                    <div class="count-data text-center">
                        <h6 class="count h2 beautiful" data-to="850" data-speed="850">{{ activeEvents.length }}</h6>
                        <p class="m-0px font-w-600 beautiful">Eventos activos</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<hr>
<div>
    <h2 class="beautiful">
        — Mis historias
        <br>
        <hr>
    </h2>
    <div *ngIf="histories.length > 0">
        <div class="card book-border" style="width: 14rem; display: inline-flex; max-width: 50%;" *ngFor="let h of histories">
            <img [src]="getImageUrl(h.category)" class="card-img-top card-image" alt="...">
            <div class="card-body">
                <h5 class="card-title beautiful" style="max-height: 3.2em; overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 1; -webkit-box-orient: vertical;">{{ h.title }}</h5>
                <p class="card-text" style="max-height: 3.2em; overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;">{{ h.description }}</p>
                <a class="btn btn-primary beautiful" routerLink="/edit-histories/{{ h.id }}">Editar</a>
                <a class="btn btn-warning beautiful" routerLink="/see-your-history/{{ h.id }}">Ver</a>
                <button class="btn btn-danger beautiful" (click)="deleteHistory(h.id)">Eliminar</button>
            </div>
        </div>
    </div>
</div>
<hr>
<div>
    <h2 class="beautiful">
        — Biblioteca
        <br>
        <hr>
    </h2>
    <div class="card book-border" style="width: 14rem; display: inline-flex; max-width: 50%;" *ngFor="let s of savedHistories">
        <img [src]="getImageUrl(s.category)" class="card-img-top card-image" alt="...">
        <div class="card-body">
            <h5 class="card-title beautiful" style="max-height: 3.2em; overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 1; -webkit-box-orient: vertical;">{{ s.title }}</h5>
            <p class="card-text beautiful" style="max-height: 3.2em; overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;">{{ s.description }}</p>
            <a class="btn btn-primary beautiful" routerLink="/see-histories/{{ s.history_id }}/{{ userId }}">Ver más</a>
            <a class="btn btn-danger beautiful" (click)="deleteSavedHistory(s.history_id)">Borrar</a>
        </div>
    </div>
</div>
<hr>
<div>
    <h2 class="beautiful">
        — Historias Finalizadas
        <br>
        <hr>
    </h2>
    <div class="card book-border" style="width: 14rem; display: inline-flex; max-width: 50%;" *ngFor="let f of finishedHistories">
        <img [src]="getImageUrl(f.category)" class="card-img-top card-image" alt="...">
        <div class="card-body">
            <h5 class="card-title beautiful" style="max-height: 3.2em; overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 1; -webkit-box-orient: vertical;">{{ f.title }}</h5>
            <p class="card-text beautiful" style="max-height: 3.2em; overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;">{{ f.description }}</p>
            <a class="btn btn-primary beautiful" routerLink="/see-histories/{{ f.history_id }}/{{ userId }}">Ver más</a>
        </div>
    </div>
</div>
<hr>
<div>
    <h2 class="beautiful">
        — Tus eventos activos
        <br>
        <hr>
    </h2>
    <div *ngIf="activeEvents.length > 0">
        <div class="card book-border" style="width: 18rem; display: inline-flex; max-width: 50%;" *ngFor="let a of activeEvents">
            <img class="card-img-top" src="/assets/evento.jpg" alt="Card image cap">
            <div class="card-body">
                <h5 class="card-title beautiful" style="max-height: 3.2em; overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 1; -webkit-box-orient: vertical;">{{ a.name_event }}</h5>
            </div>
            <hr>
            <div class="card-body">
                <a class="btn btn-primary beautiful" routerLink="/see-your-event/{{ a.event_id }}">Ver</a>
            </div>
        </div>
    </div>
</div>